<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MatrixEdge - å…¨çƒåˆ†å¸ƒå¼è¾¹ç¼˜åˆ†å‘æ§åˆ¶ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+SC:wght@300;500;700&display=swap');

        :root {
            --accent: #00f2fe;
            --accent-dark: #0072ff;
            --bg-main: #020617;
            --card-bg: rgba(15, 23, 42, 0.8);
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--bg-main);
            color: #94a3b8;
            overflow: hidden;
            user-select: none;
        }

        /* æé€Ÿå“åº”åŠ¨ç”» */
        .page-transition { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .hover-scale { transition: transform 0.2s; }
        .hover-scale:hover { transform: scale(1.02); }

        /* å¤§å‚è´¨æ„Ÿ UI */
        .glass { background: var(--card-bg); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.05); }
        .neon-border { border: 1px solid rgba(0, 242, 254, 0.3); box-shadow: 0 0 20px rgba(0, 242, 254, 0.1); }
        .neon-text { text-shadow: 0 0 10px rgba(0, 242, 254, 0.5); color: white; }
        
        /* ä¾§è¾¹æ  */
        .nav-item.active {
            background: linear-gradient(90deg, rgba(0, 114, 255, 0.2) 0%, transparent 100%);
            border-right: 3px solid var(--accent);
            color: white;
        }

        /* æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }

        /* æ¨¡æ‹Ÿ LED ç¯ */
        .led-green { background: #10b981; box-shadow: 0 0 8px #10b981; }
        .led-amber { background: #f59e0b; box-shadow: 0 0 8px #f59e0b; }

        /* æç°çª—å£åŠ¨ç”» */
        @keyframes slideIn { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .modal-animate { animation: slideIn 0.3s ease-out; }
    </style>
</head>
<body class="h-screen w-screen flex flex-col">

    <div id="login_view" class="fixed inset-0 z-[9999] bg-[#010409] flex items-center justify-center">
        <div class="w-full max-w-lg p-12 glass rounded-[2rem] neon-border text-center">
            <h1 class="text-4xl font-black mb-2 tracking-widest neon-text" style="font-family: 'Orbitron';">MATRIX CORE</h1>
            <p class="text-xs text-gray-500 uppercase tracking-[0.5em] mb-12">æ™ºèƒ½è¾¹ç¼˜è®¡ç®—é›†ç¾¤æ¥å…¥ç³»ç»Ÿ</p>
            <div class="space-y-6">
                <div class="relative group">
                    <input type="text" id="login_user" class="w-full bg-black/50 border border-gray-800 rounded-xl px-6 py-4 outline-none focus:border-[#00f2fe] transition-all text-white" placeholder="è¿è¥å•†è´¦å·">
                </div>
                <div class="relative group">
                    <input type="password" id="login_pass" class="w-full bg-black/50 border border-gray-800 rounded-xl px-6 py-4 outline-none focus:border-[#00f2fe] transition-all text-white" placeholder="è®¿é—®å®‰å…¨å¯†é’¥">
                </div>
                <button onclick="handleAuth()" class="w-full bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-bold py-4 rounded-xl shadow-2xl hover:brightness-110 active:scale-[0.98] transition-all">
                    å¯åŠ¨å†…æ ¸è¿æ¥
                </button>
            </div>
            <p id="auth_err" class="mt-6 text-red-500 text-xs font-bold hidden">ACCESS DENIED: å‡­æ®æ— æ³•åŒ¹é…å†…éƒ¨æ•°æ®åº“</p>
        </div>
    </div>

    <div id="notif_area" class="fixed top-20 right-6 z-[999] space-y-4"></div>

    <div id="main_app" class="hidden h-screen w-screen flex overflow-hidden">
        
        <aside class="w-72 bg-[#020617] border-r border-white/5 flex flex-col">
            <div class="p-10">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-white shadow-lg">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                    </div>
                    <div>
                        <div class="text-white font-bold text-lg leading-tight">è¾¹ç¼˜äº‘ä¸­æ§</div>
                        <div class="text-[10px] text-gray-500 font-mono">NODE CONTROL V5.2</div>
                    </div>
                </div>
            </div>

            <nav class="flex-1 px-6 space-y-2 overflow-y-auto">
                <div class="text-[10px] text-gray-600 font-bold px-4 mb-2 uppercase">æ ¸å¿ƒç›‘æ§</div>
                <button onclick="router('dash')" class="nav-item active w-full flex items-center space-x-4 px-5 py-4 rounded-xl transition-all">
                    <span class="text-xl">ğŸ“Š</span><span class="text-sm font-medium">æ¦‚è§ˆæ§åˆ¶å°</span>
                </button>
                <button onclick="router('nodes')" class="nav-item w-full flex items-center space-x-4 px-5 py-4 rounded-xl text-gray-400 hover:bg-white/5 transition-all">
                    <span class="text-xl">ğŸ–¥ï¸</span><span class="text-sm font-medium">èŠ‚ç‚¹èµ„æºä¸­å¿ƒ</span>
                </button>
                <button onclick="router('finance')" class="nav-item w-full flex items-center space-x-4 px-5 py-4 rounded-xl text-gray-400 hover:bg-white/5 transition-all">
                    <span class="text-xl">ğŸ’°</span><span class="text-sm font-medium">è´¦åŠ¡ç»“ç®—ç³»ç»Ÿ</span>
                </button>
                
                <div class="text-[10px] text-gray-600 font-bold px-4 mt-8 mb-2 uppercase">ç³»ç»Ÿå®‰å…¨</div>
                <button onclick="router('security')" class="nav-item w-full flex items-center space-x-4 px-5 py-4 rounded-xl text-gray-400 hover:bg-white/5 transition-all">
                    <span class="text-xl">ğŸ›¡ï¸</span><span class="text-sm font-medium">å®‰å…¨å®¡è®¡ä¸­å¿ƒ</span>
                </button>
                <button onclick="router('settings')" class="nav-item w-full flex items-center space-x-4 px-5 py-4 rounded-xl text-gray-400 hover:bg-white/5 transition-all">
                    <span class="text-xl">âš™ï¸</span><span class="text-sm font-medium">å…¨å±€é…ç½®è®¾ç½®</span>
                </button>
            </nav>

            <div class="p-8 border-t border-white/5">
                <div class="glass p-4 rounded-2xl">
                    <div class="text-[10px] text-gray-500 mb-1">å½“å‰æ“ä½œIP</div>
                    <div id="display_ip" class="text-xs font-mono text-cyan-400 font-bold">è¿æ¥ä¸­...</div>
                </div>
            </div>
        </aside>

        <main class="flex-1 flex flex-col min-w-0 bg-[#020617]">
            
            <header class="h-24 px-10 flex justify-between items-center border-b border-white/5 bg-[#020617]/50 backdrop-blur-xl z-50">
                <div>
                    <h2 id="view_title" class="text-2xl font-bold text-white tracking-tight">æ¦‚è§ˆæ§åˆ¶å°</h2>
                    <p class="text-xs text-gray-500 mt-1" id="beijing_time">åŠ è½½æ—¶é—´ä¸­...</p>
                </div>
                <div class="flex items-center space-x-8">
                    <div class="flex flex-col items-end">
                        <span class="text-[10px] text-gray-500 uppercase">ç³»ç»Ÿæ€»çŠ¶æ€</span>
                        <span class="flex items-center text-xs text-green-500 font-bold">
                            <span class="w-2 h-2 led-green rounded-full mr-2 animate-pulse"></span>
                            é›†ç¾¤è¿è¡Œè‰¯å¥½ (UP)
                        </span>
                    </div>
                    <div class="w-10 h-10 rounded-full bg-gray-800 border border-white/10 flex items-center justify-center text-white cursor-pointer hover:bg-gray-700 transition">
                        ğŸ‘¤
                    </div>
                </div>
            </header>

            <div id="view_container" class="flex-1 overflow-y-auto p-10">
                
                <div id="page_dash" class="space-y-10 page-transition">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                        <div class="glass p-8 rounded-[2rem] hover-scale relative overflow-hidden group">
                            <div class="absolute -right-4 -top-4 text-6xl opacity-5 group-hover:rotate-12 transition-transform">Â¥</div>
                            <p class="text-xs font-bold text-gray-500 mb-2">ä»Šæ—¥ç´¯è®¡æ”¶ç›Š</p>
                            <div class="flex items-baseline space-x-2">
                                <span class="text-4xl font-black text-white" id="stat_profit">0.00</span>
                                <span class="text-xs text-cyan-500">CNY</span>
                            </div>
                            <div class="mt-4 text-[10px] text-green-500 flex justify-between">
                                <span>é¢„è®¡å…¨å¤©æœ€ç»ˆ:</span>
                                <span id="stat_total_target">Â¥0.00</span>
                            </div>
                        </div>
                        <div class="glass p-8 rounded-[2rem] hover-scale">
                            <p class="text-xs font-bold text-gray-500 mb-2">å®æ—¶ä¸Šè¡Œæ€»å¸¦å®½</p>
                            <div class="flex items-baseline space-x-2">
                                <span class="text-4xl font-black text-cyan-400" id="stat_bw">0.0</span>
                                <span class="text-xs text-gray-500">Mbps</span>
                            </div>
                            <div class="mt-4 h-1.5 w-full bg-white/5 rounded-full overflow-hidden">
                                <div id="bw_bar" class="h-full bg-gradient-to-r from-cyan-500 to-blue-500 transition-all duration-1000" style="width: 45%"></div>
                            </div>
                        </div>
                        <div class="glass p-8 rounded-[2rem] hover-scale">
                            <p class="text-xs font-bold text-gray-500 mb-2">PCDN æ•°æ®å‘½ä¸­ç‡</p>
                            <div class="flex items-baseline space-x-2">
                                <span class="text-4xl font-black text-purple-400">96.8</span>
                                <span class="text-xs text-gray-500">%</span>
                            </div>
                            <div class="mt-4 text-[10px] text-gray-500 flex space-x-4">
                                <span>L1: 99.2%</span>
                                <span>L2: 84.5%</span>
                            </div>
                        </div>
                        <div class="glass p-8 rounded-[2rem] hover-scale">
                            <p class="text-xs font-bold text-gray-500 mb-2">æ´»è·ƒèŠ‚ç‚¹æ€»æ•°</p>
                            <div class="flex items-baseline space-x-2">
                                <span class="text-4xl font-black text-white">5/5</span>
                                <span class="text-xs text-gray-500">ONLINE</span>
                            </div>
                            <div class="mt-4 flex -space-x-2">
                                <div class="w-6 h-6 rounded-full border-2 border-gray-900 bg-blue-500"></div>
                                <div class="w-6 h-6 rounded-full border-2 border-gray-900 bg-cyan-500"></div>
                                <div class="w-6 h-6 rounded-full border-2 border-gray-900 bg-emerald-500"></div>
                                <div class="w-6 h-6 rounded-full border-2 border-gray-900 bg-purple-500"></div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2 glass p-10 rounded-[2.5rem] h-[500px]">
                            <div class="flex justify-between items-center mb-10">
                                <h3 class="font-bold text-white flex items-center">
                                    <span class="w-1.5 h-6 bg-cyan-500 rounded-full mr-3"></span>
                                    ä¸Šè¡Œæµé‡çŸ©é˜µåŠ¨æ€å›¾ (Real-time Matrix)
                                </h3>
                                <div class="flex space-x-2">
                                    <button class="px-4 py-1.5 text-[10px] glass rounded-full text-cyan-400 border-cyan-400/20">5åˆ†é’Ÿ</button>
                                    <button class="px-4 py-1.5 text-[10px] text-gray-500">1å°æ—¶</button>
                                </div>
                            </div>
                            <div class="h-[320px]">
                                <canvas id="chart_main"></canvas>
                            </div>
                        </div>
                        <div class="glass p-10 rounded-[2.5rem] flex flex-col">
                            <h3 class="font-bold text-white mb-8">èŠ‚ç‚¹å®æ—¶è´Ÿè½½</h3>
                            <div id="node_list_container" class="space-y-8 flex-1">
                                </div>
                            <button onclick="router('nodes')" class="mt-8 w-full py-4 text-xs font-bold text-gray-400 hover:text-white transition border-t border-white/5">
                                æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹è¯¦æƒ… â†’
                            </button>
                        </div>
                    </div>
                </div>

                <div id="page_nodes" class="hidden space-y-8 page-transition">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-white">åˆ†å¸ƒå¼èŠ‚ç‚¹é›†ç¾¤ (China Region)</h3>
                        <div class="flex space-x-4">
                            <button class="px-6 py-2 glass text-xs rounded-xl hover:bg-white/5">æ‰¹é‡å¯¼å‡ºæ•°æ®</button>
                            <button onclick="pushNotif('ç³»ç»Ÿæ­£å¿™', 'å½“å‰è°ƒåº¦ä»»åŠ¡è¿‡é«˜ï¼Œæ— æ³•å¢åŠ æ–°èŠ‚ç‚¹')" class="px-6 py-2 bg-cyan-600 text-white text-xs font-bold rounded-xl shadow-lg shadow-cyan-600/20">+ éƒ¨ç½²æ–°è¾¹ç¼˜èŠ‚ç‚¹</button>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="node_grid">
                        </div>
                </div>

                <div id="page_finance" class="hidden space-y-8 page-transition">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="glass p-10 rounded-[2rem] border-l-4 border-emerald-500">
                            <p class="text-xs text-gray-500 mb-2">å¯æç°ä½™é¢ (CNY)</p>
                            <h4 class="text-4xl font-black text-white">Â¥ 1,284.50</h4>
                            <button onclick="openWithdraw()" class="mt-6 w-full py-3 bg-emerald-600 text-white rounded-xl font-bold hover:brightness-110 transition">ç«‹å³ç»“ç®—åˆ°é“¶è¡Œå¡</button>
                        </div>
                        <div class="glass p-10 rounded-[2rem]">
                            <p class="text-xs text-gray-500 mb-2">æœ¬æœˆé¢„è®¡æ€»æ”¶å…¥</p>
                            <h4 class="text-3xl font-black text-white">Â¥ 3,412.00</h4>
                            <p class="mt-4 text-[10px] text-gray-600">è¾ƒä¸ŠæœˆåŒæœŸ: <span class="text-green-500">â†‘ 12.4%</span></p>
                        </div>
                        <div class="glass p-10 rounded-[2rem]">
                            <p class="text-xs text-gray-500 mb-2">ç»“ç®—ä¸­å†»ç»“é‡‘é¢</p>
                            <h4 class="text-3xl font-black text-gray-500">Â¥ 0.00</h4>
                            <p class="mt-4 text-[10px] text-gray-600">ä¸‹ä¸€æ¬¡è‡ªåŠ¨å¯¹è´¦: 01-01</p>
                        </div>
                    </div>
                    <div class="glass p-10 rounded-[2.5rem]">
                        <h3 class="font-bold text-white mb-6">å†å²æ”¶ç›Šæ˜ç»†</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left">
                                <thead class="text-gray-500 border-b border-white/5">
                                    <tr>
                                        <th class="py-4 px-2">ç»“ç®—æ—¥æœŸ</th>
                                        <th class="py-4 px-2">èŠ‚ç‚¹è´¡çŒ®(TOP1)</th>
                                        <th class="py-4 px-2">æ€»æµé‡(TB)</th>
                                        <th class="py-4 px-2">å½“æ—¥æ”¶ç›Š</th>
                                        <th class="py-4 px-2">çŠ¶æ€</th>
                                    </tr>
                                </thead>
                                <tbody class="text-gray-300">
                                    <tr class="border-b border-white/5">
                                        <td class="py-4 px-2">2025-12-19</td>
                                        <td class="py-4 px-2 text-cyan-500">ä¸Šæµ·ç”µä¿¡-01</td>
                                        <td class="py-4 px-2 font-mono">1.24 TB</td>
                                        <td class="py-4 px-2 font-bold text-white">Â¥ 124.50</td>
                                        <td class="py-4 px-2 text-green-500 text-xs">å·²ç»“ç®—</td>
                                    </tr>
                                    <tr class="border-b border-white/5">
                                        <td class="py-4 px-2">2025-12-18</td>
                                        <td class="py-4 px-2 text-cyan-500">å¹¿å·ç§»åŠ¨-05</td>
                                        <td class="py-4 px-2 font-mono">1.18 TB</td>
                                        <td class="py-4 px-2 font-bold text-white">Â¥ 118.20</td>
                                        <td class="py-4 px-2 text-green-500 text-xs">å·²ç»“ç®—</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="page_security" class="hidden space-y-8 page-transition">
                    <div class="max-w-4xl mx-auto space-y-8">
                        <div class="glass p-10 rounded-[2.5rem]">
                            <h3 class="text-xl font-bold text-white mb-8 flex items-center">
                                <span class="text-red-500 mr-3">ğŸ›¡ï¸</span>
                                ç»ˆç«¯è®¿é—®å®¡è®¡æµæ°´ (Access Audit)
                            </h3>
                            <div id="audit_log_list" class="space-y-4 font-mono text-xs">
                                </div>
                        </div>
                        <div class="grid grid-cols-2 gap-6">
                            <div class="glass p-8 rounded-[2rem]">
                                <h4 class="text-sm font-bold text-white mb-4">ç™»å½•å¯†ç ä¿®æ”¹</h4>
                                <input type="password" placeholder="è¾“å…¥æ–°å¯†ç " class="w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-xs outline-none focus:border-cyan-500 mb-4">
                                <button class="w-full py-3 bg-white/5 rounded-xl text-xs font-bold hover:bg-white/10 transition">ç¡®è®¤æ›´æ–°</button>
                            </div>
                            <div class="glass p-8 rounded-[2rem]">
                                <h4 class="text-sm font-bold text-white mb-4">ç´§æ€¥çŠ¶æ€æ§åˆ¶</h4>
                                <p class="text-[10px] text-gray-500 mb-4 text-center">é‡åˆ°æ”»å‡»æˆ–æ‰§æ³•æ£€æŸ¥æ—¶ï¼Œå¯ç‚¹å‡»ä¸€é”®åˆ‡æ–­æ‰€æœ‰å¤–ç½‘è¿æ¥</p>
                                <button onclick="confirm('ç¡®å®šè¦å…¨ç½‘ç†”æ–­å—ï¼Ÿ')" class="w-full py-3 bg-red-900/30 text-red-500 rounded-xl text-xs font-bold border border-red-500/20 hover:bg-red-500 hover:text-white transition">ä¸€é”®ç†”æ–­ (KILL SWITCH)</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <div id="modal_withdraw" class="fixed inset-0 z-[1000] hidden flex items-end justify-center bg-black/80 backdrop-blur-sm">
        <div class="w-full max-w-lg glass rounded-t-[3rem] p-12 modal-animate">
            <h3 class="text-2xl font-bold text-white mb-6">è´¦åŠ¡ç»“ç®—ç¡®è®¤</h3>
            <div class="space-y-6">
                <div class="p-6 bg-white/5 rounded-2xl">
                    <p class="text-xs text-gray-500 mb-2">æç°è‡³</p>
                    <div class="flex justify-between items-center text-white">
                        <span>ä¸­å›½å·¥å•†é“¶è¡Œ (å°¾å· 8892)</span>
                        <span class="text-xs text-cyan-400">æ›´æ¢å¡ç‰‡</span>
                    </div>
                </div>
                <div class="p-6 bg-white/5 rounded-2xl">
                    <p class="text-xs text-gray-500 mb-2">æç°é‡‘é¢</p>
                    <div class="text-3xl font-black text-white">Â¥ 1,284.50</div>
                </div>
                <button onclick="doWithdraw()" class="w-full py-5 bg-gradient-to-r from-emerald-500 to-green-600 text-white font-bold rounded-2xl">ç¡®è®¤ç»“ç®—</button>
                <button onclick="closeWithdraw()" class="w-full py-2 text-xs text-gray-500">å–æ¶ˆè¿”å›</button>
            </div>
        </div>
    </div>

    <script>
        /**
         * 1. æ ¸å¿ƒçŠ¶æ€ç®¡ç†
         */
        const CONFIG = {
            user: "ff666",
            pass: "ff888",
            nodes: [
                { id: 'S1', name: "ä¸­å›½ç”µä¿¡ - ä¸Šæµ·å¾æ±‡é›†ç¾¤", city: "ä¸Šæµ·", type: "1000Mä¸“çº¿", color: "#3b82f6", bw: 240 },
                { id: 'S2', name: "ä¸­å›½è”é€š - åŒ—äº¬æœé˜³é›†ç¾¤", city: "åŒ—äº¬", type: "500Må…¬ç½‘", color: "#f43f5e", bw: 180 },
                { id: 'S3', name: "ä¸­å›½ç§»åŠ¨ - å¹¿å·å¤©æ²³ä¸­å¿ƒ", city: "å¹¿å·", type: "10Géª¨å¹²ç½‘", color: "#10b981", bw: 680 },
                { id: 'S4', name: "ä¸­å›½ç”µä¿¡ - æˆéƒ½é«˜æ–°èŠ‚ç‚¹", city: "æˆéƒ½", type: "200Mæ··åˆå®½å¸¦", color: "#f59e0b", bw: 110 },
                { id: 'S5', name: "æ•™è‚²ç½‘ - èŠ‚ç‚¹åˆ†å‘ä¸­å¿ƒ", city: "å—äº¬", type: "100Mä¸“ç”¨", color: "#8b5cf6", bw: 45 }
            ]
        };

        let state = {
            isLoggedIn: false,
            currentView: 'dash',
            dailyTarget: 0,
            currentProfit: 0,
            ip: "æ­£åœ¨è¿½è¸ª...",
            logs: JSON.parse(localStorage.getItem('mx_logs') || '[]'),
            withdrawStep: 0
        };

        /**
         * 2. æ”¶ç›Šé€»è¾‘å¼•æ“ 4.0 (Sin Wave Algorithm)
         */
        function initProfitLogic() {
            // 80% æ¦‚ç‡åœ¨ 90-140
            const rand = Math.random();
            if(rand < 0.1) state.dailyTarget = 50 + Math.random() * 40; 
            else if(rand > 0.9) state.dailyTarget = 140 + Math.random() * 80;
            else state.dailyTarget = 90 + Math.random() * 50;

            // æ ¹æ®å½“å‰æ—¶é—´è®¡ç®—åˆå§‹ç´¯è®¡é‡‘é¢
            const now = new Date();
            const hour = now.getHours();
            const minute = now.getMinutes();
            const totalMinutes = 24 * 60;
            const currentMinutes = hour * 60 + minute;

            // æ¨¡æ‹ŸPCDNæ”¶ç›Šå³°å€¼æ›²çº¿ (æ­£å¼¦åç§»ï¼Œå¤œæ™šå¤šç™½å¤©å°‘)
            const timeFactor = (currentMinutes / totalMinutes) + (Math.sin((currentMinutes/totalMinutes)*Math.PI - Math.PI/2) * 0.1);
            state.currentProfit = state.dailyTarget * Math.max(0, timeFactor);
        }

        /**
         * 3. é¡µé¢æ¸²æŸ“ä¸åŠŸèƒ½
         */
        function router(target) {
            // åˆ‡æ¢ UI
            document.querySelectorAll('main > div > div').forEach(p => p.classList.add('hidden'));
            document.getElementById('page_' + target).classList.remove('hidden');
            
            // æ ‡é¢˜
            const titles = { dash: 'æ¦‚è§ˆæ§åˆ¶å°', nodes: 'èŠ‚ç‚¹èµ„æºä¸­å¿ƒ', finance: 'è´¦åŠ¡ç»“ç®—ç³»ç»Ÿ', security: 'å®‰å…¨å®¡è®¡ä¸­å¿ƒ', settings: 'ç³»ç»Ÿå…¨å±€é…ç½®' };
            document.getElementById('view_title').innerText = titles[target];

            // ä¾§è¾¹æ æ ·å¼
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active', 'text-white'));
            event.currentTarget.classList.add('active');

            // ç‰¹å®šé¡µé¢åˆå§‹åŒ–
            if(target === 'nodes') renderNodeGrid();
            if(target === 'security') renderAuditLogs();
            
            pushNotif('å¯¼èˆªåˆ‡æ¢', `å·²è¿›å…¥ ${titles[target]} è§†å›¾`);
        }

        function handleAuth() {
            const u = document.getElementById('login_user').value;
            const p = document.getElementById('login_pass').value;

            if(u === CONFIG.user && p === CONFIG.pass) {
                // æ¨¡æ‹Ÿç™»å½•æˆåŠŸ
                state.isLoggedIn = true;
                addLog("èº«ä»½è®¤è¯æˆåŠŸ", "SUCCESS");
                document.getElementById('login_view').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('login_view').classList.add('hidden');
                    document.getElementById('main_app').classList.remove('hidden');
                    initDashboard();
                }, 400);
            } else {
                document.getElementById('auth_err').classList.remove('hidden');
                addLog("éæ³•è®¿é—®å°è¯•", "DENIED");
            }
        }

        function initDashboard() {
            initProfitLogic();
            initMainChart();
            updateBeijingTime();
            fetchIP();
            
            // å¾ªç¯åˆ·æ–°
            setInterval(() => {
                // æ”¶ç›Šé€’å¢é€»è¾‘
                const increment = (state.dailyTarget / (24 * 60 * 12)); 
                state.currentProfit += increment * (0.9 + Math.random() * 0.2);
                
                // UI æ›´æ–°
                document.getElementById('stat_profit').innerText = state.currentProfit.toFixed(2);
                document.getElementById('stat_total_target').innerText = "Â¥" + state.dailyTarget.toFixed(2);
                
                // æµé‡éšæœºæ³¢åŠ¨
                const totalBw = 600 + Math.random() * 400;
                document.getElementById('stat_bw').innerText = totalBw.toFixed(1);
                document.getElementById('bw_bar').style.width = (totalBw / 12) + '%';

                updateChartData(totalBw);
                renderNodeList(totalBw);
            }, 5000);

            setInterval(updateBeijingTime, 1000);
        }

        function renderNodeList(totalBw) {
            const container = document.getElementById('node_list_container');
            container.innerHTML = CONFIG.nodes.map(node => {
                const nodeBw = (totalBw / 5) * (0.8 + Math.random() * 0.4);
                return `
                    <div class="group cursor-default">
                        <div class="flex justify-between text-[11px] mb-2 font-bold uppercase tracking-tighter">
                            <span class="text-gray-400">${node.name}</span>
                            <span class="text-cyan-400 font-mono">${nodeBw.toFixed(1)} Mbps</span>
                        </div>
                        <div class="h-1 w-full bg-white/5 rounded-full overflow-hidden">
                            <div class="h-full transition-all duration-1000" style="width: ${nodeBw/8}%; background-color: ${node.color}"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderNodeGrid() {
            const grid = document.getElementById('node_grid');
            grid.innerHTML = CONFIG.nodes.map(node => `
                <div class="glass p-8 rounded-[2rem] flex flex-col hover-scale">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <div class="text-white font-bold mb-1">${node.name}</div>
                            <div class="text-[10px] text-gray-500 uppercase">${node.city} | ${node.type}</div>
                        </div>
                        <span class="px-3 py-1 bg-green-500/10 text-green-500 text-[10px] font-bold rounded-full">RUNNING</span>
                    </div>
                    <div class="grid grid-cols-3 gap-4 mb-8 text-center">
                        <div class="bg-white/5 p-3 rounded-xl">
                            <div class="text-[10px] text-gray-500 mb-1 font-bold">ä¸¢åŒ…ç‡</div>
                            <div class="text-xs text-white">0.02%</div>
                        </div>
                        <div class="bg-white/5 p-3 rounded-xl">
                            <div class="text-[10px] text-gray-500 mb-1 font-bold">å»¶è¿Ÿ</div>
                            <div class="text-xs text-white">12ms</div>
                        </div>
                        <div class="bg-white/5 p-3 rounded-xl">
                            <div class="text-[10px] text-gray-500 mb-1 font-bold">ç£ç›˜IO</div>
                            <div class="text-xs text-white">422MB/s</div>
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button class="flex-1 py-3 glass rounded-xl text-[10px] font-bold hover:bg-white/10">æ€§èƒ½è¯Šæ–­</button>
                        <button class="flex-1 py-3 glass rounded-xl text-[10px] font-bold hover:bg-white/10 text-amber-500">é‡å¯èŠ‚ç‚¹</button>
                    </div>
                </div>
            `).join('');
        }

        function renderAuditLogs() {
            const list = document.getElementById('audit_log_list');
            list.innerHTML = state.logs.map(log => `
                <div class="flex justify-between p-4 bg-white/5 rounded-xl border-l-2 ${log.status==='SUCCESS'?'border-cyan-500':'border-red-500'}">
                    <div class="flex space-x-6">
                        <span class="text-gray-600">${log.time}</span>
                        <span class="text-white font-bold">${log.ip}</span>
                        <span class="text-gray-400 italic">>> ${log.action}</span>
                    </div>
                    <span class="${log.status==='SUCCESS'?'text-cyan-500':'text-red-500'} font-black">${log.status}</span>
                </div>
            `).join('');
        }

        /**
         * 4. å›¾è¡¨æ ¸å¿ƒ
         */
        let chartInstance;
        function initMainChart() {
            const ctx = document.getElementById('chart_main').getContext('2d');
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, 'rgba(0, 242, 254, 0.4)');
            gradient.addColorStop(1, 'transparent');

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array(20).fill(''),
                    datasets: [{
                        label: 'å®æ—¶ä¸Šè¡Œ (Mbps)',
                        borderColor: '#00f2fe',
                        borderWidth: 3,
                        pointRadius: 0,
                        fill: true,
                        backgroundColor: gradient,
                        data: Array(20).fill(0).map(() => 500 + Math.random() * 300),
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { 
                            grid: { color: 'rgba(255,255,255,0.05)', drawBorder: false },
                            ticks: { color: '#475569', font: { family: 'monospace', size: 10 } }
                        },
                        x: { display: false }
                    }
                }
            });
        }

        function updateChartData(val) {
            chartInstance.data.datasets[0].data.shift();
            chartInstance.data.datasets[0].data.push(val);
            chartInstance.update('none');
        }

        /**
         * 5. å·¥å…·å‡½æ•°
         */
        function updateBeijingTime() {
            const now = new Date();
            document.getElementById('beijing_time').innerText = "åŒ—äº¬æ—¶é—´: " + now.toLocaleString('zh-CN', { hour12: false });
        }

        async function fetchIP() {
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                state.ip = data.ip;
            } catch(e) { state.ip = "220.181.38.148 (æ¨¡æ‹Ÿ)"; }
            document.getElementById('display_ip').innerText = state.ip;
        }

        function addLog(action, status) {
            const log = {
                time: new Date().toLocaleTimeString(),
                ip: state.ip,
                action: action,
                status: status
            };
            state.logs.unshift(log);
            if(state.logs.length > 50) state.logs.pop();
            localStorage.setItem('mx_logs', JSON.stringify(state.logs));
        }

        function pushNotif(title, text) {
            const area = document.getElementById('notif_area');
            const div = document.createElement('div');
            div.className = "glass p-4 rounded-xl border-l-4 border-cyan-500 min-w-[200px] shadow-2xl modal-animate";
            div.innerHTML = `<div class="text-[10px] font-bold text-cyan-400 uppercase">${title}</div><div class="text-xs text-white">${text}</div>`;
            area.appendChild(div);
            setTimeout(() => div.remove(), 4000);
        }

        // æç°æ§åˆ¶
        function openWithdraw() { document.getElementById('modal_withdraw').classList.remove('hidden'); }
        function closeWithdraw() { document.getElementById('modal_withdraw').classList.add('hidden'); }
        function doWithdraw() {
            pushNotif('ç»“ç®—è¯·æ±‚', 'æ­£åœ¨å¯¹è´¦å¹¶æ‰“æ¬¾ï¼Œé¢„è®¡2å°æ—¶å†…åˆ°è´¦...');
            closeWithdraw();
            addLog("å‘èµ·è´¦åŠ¡æç° (Â¥1284.50)", "SUCCESS");
        }
    </script>
</body>
</html>
